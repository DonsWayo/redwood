## Features

- dbAuth: Unique session cookie name per port #9248 by @Tobbe

  Previously you couldn't run two different Redwood apps at the same time (by using different ports) when using dbAuth. One app would overwrite the session cookie used by the other app, and vice versa. They both used the same cookie name (`session`), and browsers distinguish cookies by hostname, not port.

  This PR lets users configure the cookie name they want to use by setting `cookie.name` in their `functions/auth.ts` file. If that option is not set, it will default to the old `session` name.

- `<PrivateSet>` #9303 by @Tobbe

  Fixes #2562, #9304, and https://community.redwoodjs.com/t/private-route-error-with-7-0-0-canary-347/5337. This PR deprecates the `<Private>` component and the `private` prop on `<Set>` and introduces a new `<PrivateSet>` component.

- feat(cli): Setup command for mailer #9335 by @Josh-Walker-GM

  This PR adds a setup command for the mailer, `yarn rw setup mailer`. It also adds functionality to the mailer which enables it to conditionally use an in-memory handler for tests and the studio handler for development if those dependencies are available.

## Fixes

- Fix infinite loops on nested private routes with roles #9204 by @KrisCoulson

  Fixes #9131. This restores the Router's ability to handle multiple nested routes with different levels of authentication and redirect contexts.

- fix(types): Generate maps to allow improved "go to definition" behaviour #9269 by @Josh-Walker-GM

  Fixes #5862 and #2867. Previously, navigating to the definition of pages, layouts, components, cells etc. would lead you to the `.d.ts` file. This could be really frustrating if you're used to flying around between definitions this way. This PR generates basic definition/source mappings for directory mapped modules, cell mirrors, router pages, and route links.

- Fix Set wrapper type so you can have an array of wrappers #9314 by @Tobbe

  Fixes #9313. This PR lets you do something like this in your `web/src/Routes.tsx` without type errors (notice the array of wrappers):

  ```tsx
  const Routes = () => {
    return (
      <Router>
        <Set wrap={[Wrapper]}>
          <Route path="/" page={HomePage} name="home" />
        </Set>
        <Route notfound page={NotFoundPage} />
      </Router>
    )
  }
  ```

- Don't remount wrap components when navigating within Set #9312 by @Tobbe

  Fixes #9105. This PR assigns each Set a unique id and uses that id as a key when rendering all the wrapper components.

## Core Dependencies

- update storybook monorepo to v7.4.6 #9256
- update dependency @fastify/static to v6.11.2 #9202
- update prisma monorepo to v5.4.2 #9294
- update babel monorepo to v7.23.2 #9344
- upgrade vite to v4.5.0 #9328

## Docs

- Fix typos, removing erroneous apostrophes from personal possessive pronouns #9216 by @Philzen
- Fix broken link to most recent jest config example #9266 by @Philzen
- Fix TypeScript code highlighting (Chapter 6: Comments â€“ Testing the service) #9267 by @Philzen
- Clarify Auth0 Configuration #9238 by @jdrbc
- docs: add missing `await` in service validation example #9243 by @G-Rath
- docs: Clarifies the testimonial section of the What is Redwood documentation #9207 by @jdrbc
- fix (docs): use default markdown numbered list #9265 by @esteban-url
- Fix typo in RBAC @requireAuth example #9286 by @Philzen
- Fix links to Prisma n:m relationship docs #9285 by @Philzen
- docs: How to Use Prisma Client Extensions with DB Client and Logging #9283 by @dthyresson

## Experimental features

> **Note**
>
> These features aren't officially released, but are included here for completeness since they're in this version. They're usable, but aren't fully documented and their API may change in future releases.

- feat: add experimental docker setup command #9024 by @jtoar

  Adds an experimental setup command to add a Dockerfile and compose files: `yarn rw exp setup-docker`. Feedback welcome!

- feat: Support GraphQL Subscriptions in Apollo Client using SSE links #9009 by @dthyresson

  This PR adds support for GraphQL SSE (Server Sent Events) in both the Redwood GraphQL Server and the RedwoodApolloProvider if subscriptions are enabled.

- feature: Support defer and stream GraphQL Directives in RedwoodRealtime #9235 by @dthyresson

- feat(cli-helpers): Root package install and RWJS env var #9296 by @Josh-Walker-GM

  This PR adds a few helper functions for installing packages in root workspace and for setting the `RWJS_CWD` env var correctly.

- feature: Adds utility functions to add envars and update `redwood.toml` #9324 by @dthyresson

## Dependencies

<details>
<summary>Click to see all upgraded dependencies</summary>
<ul>
<li>chore(deps): update dependency @clerk/types to v3.52.0 #9213</li>
<li>fix(deps): update dependency @clerk/clerk-sdk-node to v4.12.6 #9214</li>
<li>chore(deps): update dependency @clerk/clerk-react to v4.25.1 #9212</li>
<li>chore(deps): update dependency firebase to v10.4.0 #9203</li>
<li>fix(deps): update apollo graphql packages #9292</li>
<li>chore(deps): update dependency rimraf to v5.0.5 #9360</li>
<li>fix(deps): update dependency concurrently to v8.2.2 #9361</li>
</ul>
</details>
